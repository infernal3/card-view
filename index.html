<!doctypehtml>
<html>
  <head>
    <style>
      div.Ab{
        display:table-row;
      }
      div.Ac{
        display:table-cell;
        width:50px;
        height:50px;
        border: 1px solid #000;
        text-align:center;
        font-size:14px;
        user-select:none;
        -webkit-user-select:none;
      }
      div.Ba{
        background:#474F52;
      }
      div.Bb{
        background:#80C71F;
      }
      div.Bc{
        background:#B02E26;
      }
      div.Bd{
        background:#5E7C16;
      }
      div.Be{
        background:#C74EBD;
      }
      div.Bf{
        background:#F0F0F0;
      }
      div.Bg{
        background:#F9801D;
      }
      div.Bh{
        background:#FED83D;
      }
      div.Bi{
        background:#3C44AA;
      }
      div.Bj{
        background:#9D9D97;
      }
      div.Ca{
        padding-top:17px;
        height: 33px !important;
      }
      div.Cb{
        padding-top:2px;
        height: 48px !important;
      }
    </style>
    <script defer>
        /**
         * Original script by infernal3
         */
        const el = e => document.getElementById(e);
        var tab = 0;
        const app = document.createElement("div");
        const SetClassOf = function(x, y, newClass) {
            el(`${x}${y}`).className = newClass;
        }
        const PreventDefault = function(e) {
            e.preventDefault();
        }
        const Tab1Helper = function() {
            if(tab === 1){
                this.classList.toggle("Bb");
                this.classList.toggle("Bc");
            }
        }
        const Tab2Helper = function() {
            if(tab === 2 && Tab2Index == parseInt(this.textContent)){
                this.classList.remove("Bc");
                this.classList.add("Bb");
                Tab2Index++;
            }
        }
        const Tab3Helper = function() {
            if(tab === 3 && Tab3ConvertIndex3(Tab3Index3) == Tab3Index2){
                Tab3Index++;
                if(Tab3Index < 5) Tab3SetRedBar();
                else Tab0();
            }
        }
        const Tab4Helper = function(e) {
            if(tab === 4){
                let arr = ["Bc", "Bg", "Bh", "Bd", "Bi", "Bc"];
                for(let i=0;i<5;i++){
                    if(this.classList.contains(arr[i])) {
                        if(e.button == 0){
                            this.classList.remove(arr[i]);
                            this.classList.add(arr[i+1]);
                        } else if (e.button == 2){
                            this.classList.remove(arr[i]);
                            this.classList.add(arr[i < 1 ? 4 : i-1]);
                        }
                        return;
                    }
                }
            }
        }
        const Tab4Helper2 = function(e) {
            e.preventDefault();
            if(tab === 4){
                let arr = ["Bc", "Bg", "Bh", "Bd", "Bi", "Bc"];
                for(let i=0;i<5;i++){
                    if(this.classList.contains(arr[i])) {
                        this.classList.remove(arr[i]);
                        this.classList.add(arr[i < 1 ? 4 : i-1]);
                        return;
                    }
                }
            }
        }
        const Tab0 = function() {
            tab = 0;
            for(let i=0;i<6;i++){
                for(let j=0;j<9;j++){
                    SetClassOf(i, j, "Ac Ba");
                    el(`${i}${j}`).textContent = "";
                }
            }
        }
        const Tab1 = function() {
            Tab0();
            tab = 1;
            for(let i=1;i<4;i++){
                for(let j=2;j<7;j++){
                    SetClassOf(i, j, Math.random() < 0.25 ? "Ac Bb" : "Ac Bc");
                    el(`${i}${j}`).addEventListener("click",Tab1Helper);
                }
            }
        }
        const Tab2 = function() {
            Tab0();
            tab = 2;
            Tab2Index = 1;
            let arr=[],temp=[0,1,2,3,4,5,6,7,8,9,10,11,12,13];
            while(temp.length>0){
                arr.push(temp.splice(Math.random()*temp.length,1)[0]);
            }
            let k=0;
            for(let i=2;i<4;i++){
                for(let j=1;j<8;j++){
                    SetClassOf(i, j, "Ac Bc Ca");
                    el(`${i}${j}`).textContent = arr[k]+1;
                    el(`${i}${j}`).addEventListener("click",Tab2Helper);
                    k++;
                }
            }
        }
        const Tab3SetRedBar = function() {
            for(let i=1;i<5;i++){
                for(let j=1;j<6;j++){
                    SetClassOf(i, j, "Ac Bf");
                }
            }
            Tab3Index2 = parseInt(Math.random() * 5) + 1;
            for(let i=0;i<6;i+=5){
                for(let j=1;j<6;j++){
                    SetClassOf(i, j, "Ac Ba");
                }
                SetClassOf(i, Tab3Index2, "Ac Be");
            }
            for(let i=1;i<5;i++){
                SetClassOf(i, 7, "Ac Bj Cb");
                el(`${i}7`).innerHTML = `<img width=44 src="./TerracottaRed.webp" alt="Red Terracotta"/>`;
                el(`${i}7`).removeEventListener("click",Tab3Helper);
            }
            el(`${Tab3Index}7`).innerHTML = `<img width=44 src="./TerracottaGreen.webp" alt="Green Terracotta"/>`;
            el(`${Tab3Index}7`).addEventListener("click",Tab3Helper);
            Tab3Index3 = parseInt(Math.random() * 8) + 1;
            Tab3SetGreenBar();
        }
        const Tab3ConvertIndex3 = function(e){
            return [null,1,2,3,4,5,4,3,2][e] || null;
        }
        const Tab3SetGreenBar = function(){
            for(let j=1;j<6;j++){
                SetClassOf(Tab3Index, j, "Ac Bc");
            }
            SetClassOf(Tab3Index, Tab3ConvertIndex3(Tab3Index3), "Ac Bb");
        }
        const Tab3 = function() {
            Tab0();
            tab = 3;
            Tab3Index = 1;
            Tab3SetRedBar();
        }
        const Tab4 = function() {
            Tab0();
            tab = 4;
            let arr = ["c", "g", "h", "d", "i"];
            for(let i=1;i<4;i++){
                for(let j=3;j<6;j++){
                    SetClassOf(i, j, "Ac B" + arr[parseInt(Math.random() * 5)]);
                    el(`${i}${j}`).addEventListener("click",Tab4Helper);
                    el(`${i}${j}`).addEventListener("contextmenu",Tab4Helper2); // Most browsers bind this event to right-click
                }
            }
        }
        app.id="root";
        for(let i=0;i<6;i++){
            let str = '<div class="Ab">';
            for(let j=0;j<9;j++){
                str += `<div class="Ac Ba" id="${i}${j}"></div>`
            }
            app.innerHTML += str + "</div>";
        }
        app.innerHTML = `<h1>
                           Terminals Simulator (Card View)
                         </h1>
                         <div id="panel"></div>
                         <div id="timer"></div>` + app.innerHTML;
        window.addEventListener("load",e=>{
            document.body.append(app);
            el("panel").innerHTML += `
            <button id="tab0">(Reset)</button>
            <button id="tab1">Terminal 1</button>
            <button id="tab2">Terminal 2</button>
            <button id="tab3">Terminal 3</button>
            <button id="tab4">Terminal 4</button>
            `;
            el("tab0").addEventListener("click",()=>{Tab0();});
            el("tab1").addEventListener("click",()=>{Tab1();});
            el("tab2").addEventListener("click",()=>{Tab2();});
            el("tab3").addEventListener("click",()=>{Tab3();});
            el("tab4").addEventListener("click",()=>{Tab4();});
        });
      window.setInterval(()=>{
          if(tab === 3){
              Tab3Index3 = Tab3Index3 > 7 ? 1 : Tab3Index3 + 1;
              Tab3SetGreenBar();
          }
      },550);
    </script>
  </head>
</html>
